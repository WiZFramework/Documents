<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>言語を作ろうプロジェクト（2018年）</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h3>０４．インタプリタの作成</h3>
</div>
<!-- コンテンツ　-->
<div id="contents">
<h3>０４－０２．util.h</h3>
<div class="box1">
<pre>
#pragma once

#include &lt;cstdlib>
#include &lt;iostream>
#include &lt;string>
#include &lt;set>
#include &lt;map>
#include &lt;vector>
#include &lt;list>
#include &lt;memory>
using namespace std;

namespace ore {

#define ORE_MAX_TOKEN_LEN 255

    ///stringを255文字に切り詰める
    inline string clampToken(const char* ext) {
        string str(ext);
        if (str.size() > ORE_MAX_TOKEN_LEN) {
            str.erase(ORE_MAX_TOKEN_LEN);
        }
        return str;
    }


    //--------------------------------------------------------------------------------------
    ///  暗黙の型キャスト
    //--------------------------------------------------------------------------------------
    inline bool toBoolValue() {
        return false;
    }
    inline bool toBoolValue(bool b) {
        return b;
    }
    inline bool toBoolValue(int i) {
        if (i != 0) {
            return true;
        }
        else {
            return false;
        }
    }
    inline bool toBoolValue(double b) {
        if (b != 0.0) {
            return true;
        }
        else {
            return false;
        }
    }
    inline bool toBoolValue(const string& str) {
        //必ず10進数に変換
        int i = std::stoi(str, nullptr, 10);
        if (i != 0) {
            return true;
        }
        else {
            return false;
        }
    }

    inline int toIntValue() {
        return 0;
    }

    inline int toIntValue(bool b) {
        if (b != false) {
            return 1;
        }
        else {
            return 0;
        }
    }

    inline int toIntValue(int i) {
        return i;
    }

    inline int toIntValue(double d) {
        //強制的な型返還
        int i = (int)d;
        return i;
    }

    inline int toIntValue(const string& str) {
        //必ず10進数に変換
        int i = std::stoi(str, nullptr, 10);
        return i;
    }

    inline double toDoubleValue() {
        return 0.0;
    }

    inline double toDoubleValue(bool b) {
        if (b) {
            return 1.0;
        }
        else {
            return 0.0;
        }
    }

    inline double toDoubleValue(int i) {
        //C++に合わせた型返還
        double d = i;
        return d;
    }

    inline double toDoubleValue(double d) {
        return d;
    }


    inline double toDoubleValue(const string& str) {
        //10進のdoubleに変換
        double d = std::stod(str);
        return d;
    }

    inline string toStringValue() {
        return string("");
    }

    inline string toStringValue(bool b) {
        if (b) {
            return string("1");
        }
        else {
            return string("");
        }
    }

    inline string toStringValue(int i) {
        string str = std::to_string(i);
        return str;
    }

    inline string toStringValue(double d) {
        string str = std::to_string(d);
        return str;
    }

    inline string toStringValue(const string& str) {
        return str;
    }


}
//end namespace ore
</pre>
</div>
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="04_02.html">戻る</a></li>
</ul>
<!-- /フッタ　-->
</div>
<!-- /全体コンテナ　-->
</body>
</html>
