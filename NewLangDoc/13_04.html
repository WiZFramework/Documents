<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>言語を作ろうプロジェクト（2020年）</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h3>１３．シンプルな実装をする</h3>
</div>
<!-- コンテンツ　-->
<div id="contents">
<h3>１３－０４．関数、変数、文、式</h3>
<h4>関数と変数</h4>
　<b>Ｃ言語のバイブル</b>である、<b>プログラミング言語Ｃ</b>には、8ページに、以下の様な記述があります。
<div class="box1">
<pre>
一つのＣプログラムは、その大きさはどうであれ、関数と変数からなる。
関数には、行うべき計算の過程を指示する文、
および計算で使われる値を格納する変数が含まれる。
</pre>
</div>
　シンプルですが、Ｃ言語の構造をこれほど簡潔に述べた文章もそうはないと思います。<br />
　ここでは、2つの重要なことの説明があります。
<div class="box1">
<pre>
１、Ｃ言語は関数と変数で構成される
２、関数には、計算の過程を記す文と、変数がある。
</pre>
</div>
　１、は、いわゆる<b>グローバル領域</b>のことを説明しています（#で始まるプリプロフェッサ命令はＣ言語の一部ではないので、ここでは説明しません）。<br />
　<b>グローバル領域</b>は、あらかじめ定義される（つまり実行前に保持される）<b>グローバル変数</b>と、<b>関数</b>がある、といっています。代表的な関数は<b>main関数</b>です。<br />
　２で説明されているのは、<b>関数の中身</b>です。<b>関数の中は変数と文がある</b>といっています。<br />
　具体的には<b>関数</b>は
<div class="box1">
<pre>
戻り値の型 関数名 { 変数宣言定義 文リスト }
</pre>
</div>
　という構造になります。<br />
　関数の定義領域をまとめる<b> { </b>と<b> } </b>は必須です。<br />
　ここで出てくる<b>変数</b>は多くの場合<b>ローカル変数</b>です。<b>ローカル変数</b>はその関数内で<b>閉じて</b>います。<br />
　そして、計算過程が記される<b>文</b>があることを説明しています。<br />
　<b>文（Statement）</b>は複数記述することができそれは<b>文リスト（StatementList）</b>という形でまとめられます。<br />
　<b>Ｃ言語のソース</b>は、以上のような構造で記述され、実際の実行は、一般的には<b>main関数</b>から実行されます。<br />
　<b>main関数</b>の実行は<b>変数の宣言</b>があれば、それらを定義し、<b>文リスト</b>の先頭の<b>文</b>が実行されます。
<h4>文（Statement）</h4>
　<b>文</b>は、例えば
<div class="box1">
<pre>
printf("hello world");
</pre>
</div>
　のように<b> ; （セミコロン）</b>で区切られています。改行は無視されます。すなわち
<div class="box1">
<pre>
文の始まりからセミコロンまで
</pre>
</div>
　が<b>文</b>であり、セミコロンで区切られた後は、次の<b>文</b>が始まります。<br />
<h4>式（Expression）</h4>
　<b>文</b>は、計算そのものを記す<b>式</b>で構成されます。<br />
　ここで<b>式</b>というと
<div class="box1">
<pre>
3 + 5
</pre>
</div>
　のような算術計算を思いうかべるかもしれません。<b>算術計算</b>ももちろん<b>式</b>なのですが、<b>プロラミング言語</b>における<b>式</b>はもっと広い意味を持ちます。<br />
　例えば、C言語では
<div class="box1">
<pre>
50
</pre>
</div>
　と書けば<b>10進数の整数50</b>をあらわす定数ですが、これは、ソースコード上は<b>アスキーコード</b>の<b>5</b>と<b>0</b>が並んだものにすぎません。これを<b>50</b>という数値に変換しなければなりません。この変換処理も<b>計算</b>ですから<b>式</b>とみなされます。<br />
　<b>50</b>のような定数の記述を
<div class="box1">
<pre>
10進数整数リテラル式
</pre>
</div>
　といいます。同じように<b>0x2B</b>のような記述は
<div class="box1">
<pre>
16進数整数リテラル式
</pre>
</div>
　となり、両社とも<b>式</b>なのです。
<h4>式と計算結果</h4>
　<b>式</b>は<b>計算</b>ですので<b>結果</b>を戻します。これを<b>返す</b>と表現する場合もあります。計算結果は<b>値</b>という形で返されます。<br />
　そしてその<b>値</b>は、別の式の<b>オペランド</b>として再利用されます。<br />
　以下の<b>文</b>を考えてみましょう。
<div class="box1">
<pre>
int i;
i = (3 + 5) * (7 - 9);
</pre>
</div>
　２つの文が並んだものです。<br />
　まず、
<div class="box1">
<pre>
int i;
</pre>
</div>
　ですが、これは<b>変数iの定義</b>でありこれも<b>式</b>として実行します。
<div class="box1">
<pre>
１、iという識別子が登録される
２、その識別子対応する変数定義式が実行され、メモリが確保される
</pre>
</div>
　という処理を行い、<b> i </b>を確保します。<br />
　続いて整数リテラルが並んだ計算文です。<br />
　この処理は以下の様な順番で行われます。
<div class="box1">
<pre>
１、3という整数リテラル式が処理されて、3という値になる
２、5という整数リテラル式が処理されて、5という値になる
３、１と２の値に加算式が実行されて、8という値を得る
４、7という整数リテラル式が処理されて、7という値になる
５、9という整数リテラル式が処理されて、9という値になる
６、４と５の値に減算式が実行されて、-2という値になる
７、３の値と６の値に対して乗算式が実行されて、-16という値を得る
８、７の値が、変数iに代入され、代入した値-16という値を得る
</pre>
</div>
　８で行った<b>代入式</b>の実行は、C言語では<b>代入された値そのもの</b>が返りますが、上記の例ではをれは利用してません。<br />
　<b>変数iに代入</b>のみ処理しています。<br />
　このような処理の後は
<div class="box1">
<pre>
i
</pre>
</div>
　と書けば、<b>変数式i</b>を実行することになり、それは現在保持している<b>-16</b>という値を得ることができるようになり、例えば
<div class="box1">
<pre>
printf("%d",i);
</pre>
</div>
　などで、利用できるようになります。<br />
　つまり<b>変数式</b>を実行すると、<b>その変数の内容が戻り値</b>になるということです。<br />
<br />
　別にC言語でなくても
<div class="box1">
<pre>
int i;
i = (3 + 5) * (7 - 9);
</pre>
</div>
　がどういう計算なのか、すぐに理解する人も多いと思いますが、それを、インタプリタなりコンパイルなり、その言語を作成するということは、上記したような細かいところまで考える必要が出てきます。<br />
　というより、そういう細かいところを実装していくことが<b>言語を作成する</b>ということにほかなりません。<br />
<br />
　次項では、<b>１３－０３．ファイル構成の設定と、関数定義</b>で実装した内容について細かく分析します。<br />
　まずは、この項で説明した<b>変数</b>はまだ出てきませんが、いずれ登場する<b>変数</b>の概念も加味しながら、実装を進めていくことになります。
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="13_03.html">前ページ</a></li>
<li><a href="index.html">目次</a></li>
<li><a href="13_05.html">次ページ</a></li>
</ul>
<!-- /フッタ　-->
</div>
<!-- /全体コンテナ　-->
</body>
</html>
